base_global_planner: "navfn/NavfnROS"
NavfnROS:
    allow_unknown: true
    planner_window_x: 0.0
    planner_window_y: 0.0
    default_tolerance: 0.0
    visualize_potential: false


global_costmap:
    plugins:
        - name: static_layer
          type: "costmap_2d::StaticLayer"
        - name: obstacle_layer
          type: "costmap_2d::VoxelLayer"
        - name: inflation_layer
          type: "costmap_2d::InflationLayer"
    global_frame: "map"
    robot_base_frame: "base_footprint"
    transform_tolerance: 0.5
    update_frequency: 1.0
    publish_frequency: 0.0 # prv 0.5
    static_layer:
        unknown_cost_value: -1
        lethal_cost_value: 100
        map_topic: "map"
        first_map_only: false
        subscribe_to_updates: false
        track_unknown_space: true
        use_maximum: false
        trinary_costmap: true
    obstacle_layer:
        observation_sources: "scan"
        scan:
            topic: "scan"
            sensor_frame: "scan_link"
            observation_persistence: 10.0
            expected_update_rate: 15.0
            data_type: "LaserScan"
            clearing: true
            marking: true
            max_obstacle_height: 0.4
            min_obstacle_height: 0.48
            obstacle_range: 2.5
            raytrace_range: 3.0
            inf_is_valid: false
        max_obstacle_height: 0.8 # prv 0.65
        min_obstacle_height: 0.0
        origin_z: 0.0
        z_resolution: 0.2 # prv 0.3
        z_voxels: 4 # prv 2
        unknown_threshold: 4 # prv 15
        mark_threshold: 0
        publish_voxel_map: false
        footprint_clearing_enabled: true
    inflation_layer:
        inflation_radius: 0.5
        cost_scaling_factor: 5.0


base_local_planner: "dwa_local_planner/DWAPlannerROS"
controller_frequency: 5.0
DWAPlannerROS:
    acc_limit_x: 1.0
    acc_limit_y: 0.0
    acc_limit_th: 2.0
    max_vel_trans: 0.5
    min_vel_trans: 0.1
    max_vel_x: 0.5
    min_vel_x: 0.0
    max_vel_y: 0.0
    min_vel_y: 0.0
    max_vel_theta: 3.0
    min_vel_theta: 0.4

    yaw_goal_tolerance: 0.1
    xy_goal_tolerance: 0.05
    latch_xy_goal_tolerance: false

    sim_time: 1.0
    sim_granularity: 0.025
    vx_samples: 6
    vy_samples: 1
    vth_samples: 20

    path_distance_bias: 32.0 # prv 64.0
    goal_distance_bias: 24.0
    occdist_scale: 0.5
    forward_point_distance: 0.325
    stop_time_buffer: 0.2
    scaling_speed: 0.25
    max_scaling_factor: 0.2
    publish_cost_grid: false

    oscillation_reset_dist: 0.05

    prune_plan: true


local_costmap:
    plugins:
        - name: obstacle_layer
          type: "costmap_2d::VoxelLayer"
        - name: inflation_layer
          type: "costmap_2d::InflationLayer"
    global_frame: "odom"
    robot_base_frame: "base_footprint"
    transform_tolerance: 0.5
    update_frequency: 5.0
    publish_frequency: 0.0 # prv 2.0
    rolling_window: true
    width: 4.0
    height: 4.0
    resolution: 0.05
    obstacle_layer:
        observation_sources: "scan pointcloud"
        scan:
            topic: "scan"
            sensor_frame: "scan_link"
            observation_persistence: 10.0
            expected_update_rate: 15.0
            data_type: "LaserScan"
            clearing: true
            marking: true
            max_obstacle_height: 0.4
            min_obstacle_height: 0.48
            obstacle_range: 2.5
            raytrace_range: 3.0
            inf_is_valid: false
        pointcloud:
            topic: "/camera/depth_registered/points"
            sensor_frame: "camera_color_optical_frame"
            observation_persistence: 10.0
            expected_update_rate: 15.0
            data_type: "PointCloud2"
            clearing: true
            marking: true
            max_obstacle_height: 0.0
            min_obstacle_height: 0.8
            obstacle_range: 10.0
            raytrace_range: 15.0
            inf_is_valid: false
        max_obstacle_height: 0.8 # prv 0.65
        min_obstacle_height: 0.0
        origin_z: 0.0
        z_resolution: 0.2 # prv 0.3
        z_voxels: 4 # prv 2
        unknown_threshold: 4 # prv 15
        mark_threshold: 0
        publish_voxel_map: false
        footprint_clearing_enabled: true
    inflation_layer:
        inflation_radius: 0.25
        cost_scaling_factor: 5.0


recovery_behaviors:
    - name: conservative_reset
      type: clear_costmap_recovery/ClearCostmapRecovery
    - name: rotate_recovery
      type: rotate_recovery/RotateRecovery
    - name: aggressive_reset
      type: clear_costmap_recovery/ClearCostmapRecovery

planner_patience: 5.0
controller_patience: 15.0 # prv 3.0
recovery_behavior_enabled: true
conservative_reset_dist: 3.0
clearing_rotation_allowed: true
shutdown_costmaps: false
oscillation_timeout: 0.0
oscillation_distance: 0.5
planner_frequency: 0.0 # prv 1.0
max_planning_retries: -1
